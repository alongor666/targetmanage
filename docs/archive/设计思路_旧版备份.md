# 全局设计规范 - 快速参考手册

> 本文档为 Next.js + Tailwind CSS 项目的设计系统实现指南。
> 提供设计 token、Tailwind 工具类、组件 API 的快速查询。

**版本:** 2.0.0 (Tailwind 适配版)
**最后更新:** 2025-12-23
**技术栈:** Next.js 14 + TypeScript 5 + Tailwind CSS 3

## 1. 设计原则

### 1.1 核心设计理念
- **一致性优先**: 所有组件遵循统一的设计语言
- **业务导向**: 设计服务于数据分析和决策支持
- **效率至上**: 减少用户认知负担，提升操作效率
- **响应式设计**: 适配不同设备和屏幕尺寸

### 1.2 技术约束
- **CSS变量驱动**: 所有样式通过CSS变量管理
- **组件化思维**: 可复用的UI组件设计
- **性能优先**: 避免过度的视觉效果影响性能

## 2. 色彩系统

### 2.1 基础色彩变量
```css
:root {
    /* === 主色调系统 === */
    --primary-red: #a02724;          /* 品牌主色 - 红色系 */
    --tesla-blue: #0070c0;           /* 特斯拉风格选中色 */
    
    /* === 状态色彩系统 === */
    --status-good: #00b050;          /* 优秀 - 绿色 */
    --status-warning: #ffc000;       /* 预警 - 橙色 */
    --status-danger: #c00000;        /* 危险 - 红色 */
    --status-normal: #666666;        /* 正常 - 灰色 */
    
    /* === 文字色彩系统 === */
    --text-primary: #333333;          /* 主要文字 - 黑色 */
    --text-secondary: #666666;       /* 次要文字 - 中灰 */
    --text-muted: #999999;           /* 辅助文字 - 浅灰 */
    --text-inverse: #ffffff;          /* 反色文字 - 白色 */
    
    /* === 边框和分割线 === */
    --border-light: #e0e0e0;         /* 浅边框 */
    --border-medium: #cccccc;        /* 中等边框 */
    --border-dark: #999999;          /* 深边框 */
    
    /* === 背景色系统 === */
    --bg-primary: #ffffff;           /* 主背景 */
    --bg-secondary: #f8f9fa;         /* 次要背景 */
    --bg-overlay: rgba(0, 0, 0, 0.5); /* 遮罩背景 */
    
    /* === 图表专用色 === */
    --chart-gray-line: #808080;       /* 图表灰色连线 */
    --chart-warning-dash: #ffc000;   /* 预警虚线色 */

    /* === 经营概览堆积图专用色 === */
    --chart-claim-rate-bar: #87ceeb;  /* 满期赔付率柱 - 浅蓝色 */
    --chart-expense-rate-bar: #d3d3d3; /* 费用率柱 - 浅灰色 */
    --chart-progress-line: #808080;   /* 达成率折线 - 灰色 */

    /* === 数据深度色彩 === */
    --data-depth-light: #e6f3ff;     /* 浅度数据色 */
    --data-depth-medium: #4d94ff;    /* 中度数据色 */
    --data-depth-dark: #0066cc;      /* 深度数据色 */
}
```

### 2.2 色彩使用规范

#### 状态色彩应用场景
| 状态 | 颜色变量 | 使用场景 | 示例 |
|------|---------|---------|------|
| 优秀 | `--status-good` | 指标表现良好 | 变动成本率 < 91% |
| 预警 | `--status-warning` | 需要关注 | 91% ≤ 变动成本率 < 94% |
| 危险 | `--status-danger` | 需要改进 | 变动成本率 ≥ 94% |
| 正常 | `--status-normal` | 默认状态 | 筛选器未选中 |

#### 交互状态色彩
```css
/* 选中状态 - 特斯拉蓝风格 */
.selected {
    background-color: var(--tesla-blue);
    color: var(--text-inverse);
}

/* 悬停状态 */
.hover {
    background-color: rgba(0, 112, 192, 0.05);
    border-color: var(--tesla-blue);
}

/* 禁用状态 */
.disabled {
    background-color: var(--border-light);
    color: var(--text-muted);
    cursor: not-allowed;
}
```

### 2.3 数据可视化色彩

#### 深度色彩映射
```javascript
/**
 * 根据指标值计算深度颜色
 * @param {number} value - 指标值
 * @param {number} maxValue - 最大值
 * @returns {string} 颜色值
 */
function getDataDepthColor(value, maxValue) {
    const ratio = value / maxValue;
    
    if (ratio < 0.33) return 'var(--data-depth-light)';
    if (ratio < 0.67) return 'var(--data-depth-medium)';
    return 'var(--data-depth-dark)';
}
```

## 3. 字体系统

### 3.1 字体族定义
```css
:root {
    /* === 系统字体栈 === */
    --font-family-primary: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 
                           'Microsoft YaHei', 'PingFang SC', Arial, sans-serif;
    
    --font-family-mono: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 
                        'Source Code Pro', monospace;
}
```

### 3.2 字体尺寸系统
```css
:root {
    /* === 字体尺寸 === */
    --font-size-xs: 11px;      /* 辅助信息 */
    --font-size-sm: 12px;      /* 小号文字 */
    --font-size-base: 14px;    /* 基础文字 */
    --font-size-md: 16px;      /* 中等文字 */
    --font-size-lg: 18px;      /* 大号文字 */
    --font-size-xl: 24px;      /* 标题文字 */
    --font-size-xxl: 32px;     /* 大标题 */
    --font-size-xxxl: 48px;    /* KPI数值 */
}
```

### 3.3 字重系统
```css
:root {
    /* === 字重 === */
    --font-weight-light: 300;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
}
```

### 3.4 行高系统
```css
:root {
    /* === 行高 === */
    --line-height-tight: 1.2;
    --line-height-normal: 1.4;
    --line-height-relaxed: 1.6;
}
```

## 4. 间距系统

### 4.1 基础间距
```css
:root {
    /* === 基础间距单位 === */
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 16px;
    --spacing-lg: 24px;
    --spacing-xl: 32px;
    --spacing-xxl: 48px;
    --spacing-xxxl: 64px;
}
```

### 4.2 间距使用规范
| 场景 | 间距变量 | 适用组件 |
|------|---------|---------|
| 组件内部间距 | `--spacing-sm` | 按钮、表单控件 |
| 组件间间距 | `--spacing-md` | 卡片、图表 |
| 区块间间距 | `--spacing-lg` | 页面区块 |
| 大区块间距 | `--spacing-xl` | 页面主体 |

## 5. 圆角系统

### 5.1 圆角定义
```css
:root {
    /* === 圆角系统 === */
    --border-radius-xs: 4px;
    --border-radius-sm: 8px;
    --border-radius-md: 12px;
    --border-radius-lg: 16px;
    --border-radius-xl: 20px;
    --border-radius-full: 50%;
}
```

### 5.2 圆角使用场景
| 组件类型 | 圆角变量 | 示例 |
|---------|---------|------|
| 按钮、输入框 | `--border-radius-sm` | 筛选器按钮 |
| 卡片容器 | `--border-radius-md` | KPI卡片、图表容器 |
| 大型容器 | `--border-radius-lg` | 上传框、模态框 |
| 圆形元素 | `--border-radius-full` | 悬浮按钮、头像 |

## 6. 阴影系统

### 6.1 阴影定义
```css
:root {
    /* === 阴影系统 === */
    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08);
    --shadow-md: 0 2px 12px rgba(0, 0, 0, 0.08);
    --shadow-lg: 0 4px 20px rgba(0, 0, 0, 0.12);
    --shadow-xl: 0 8px 32px rgba(0, 0, 0, 0.12);
    --shadow-focus: 0 0 0 3px rgba(0, 112, 192, 0.2);
}
```

### 6.2 阴影使用规范
| 层级 | 阴影变量 | 使用场景 |
|------|---------|---------|
| 轻微悬浮 | `--shadow-sm` | 表单控件聚焦 |
| 卡片层级 | `--shadow-md` | KPI卡片、筛选器 |
| 弹出层级 | `--shadow-lg` | 下拉面板、提示框 |
| 模态层级 | `--shadow-xl` | 对话框、大面板 |
| 焦点状态 | `--shadow-focus` | 键盘焦点 |

## 7. 动画系统

### 7.1 动画时长
```css
:root {
    /* === 动画时长 === */
    --duration-fast: 150ms;
    --duration-normal: 250ms;
    --duration-slow: 350ms;
}
```

### 7.2 缓动函数
```css
:root {
    /* === 缓动函数 === */
    --ease-out: cubic-bezier(0.25, 0.46, 0.45, 0.94);
    --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
}
```

### 7.3 通用过渡
```css
:root {
    /* === 通用过渡 === */
    --transition-fast: all var(--duration-fast) var(--ease-out);
    --transition-normal: all var(--duration-normal) var(--ease-out);
    --transition-slow: all var(--duration-slow) var(--ease-in-out);
}
```

## 8. 布局系统

### 8.1 网格系统
```css
:root {
    /* === 网格列数 === */
    --grid-cols-1: 1;
    --grid-cols-2: 2;
    --grid-cols-3: 3;
    --grid-cols-4: 4;
    --grid-cols-6: 6;    /* 扩展后支持6列 */
}
```

### 8.2 容器尺寸（2025-12-21更新）
```css
:root {
    /* === 页面容器 === */
    --ppt-width: 2400px;              /* 1.5倍扩展宽度（原1600px） */
    --ppt-width-standard: 1600px;     /* 标准宽度备份 */

    /* === 内容区容器 === */
    --content-max-width: 2100px;      /* 1.5倍扩展（原1400px） */
    --content-max-width-standard: 1400px; /* 标准宽度备份 */
    --content-max-width-compact: 1100px;  /* 紧凑宽度（笔记本） */

    /* === 图表尺寸 === */
    --chart-height: 600px;            /* 标准图表高度 */
    --chart-height-sm: 400px;         /* 小尺寸图表 */
    --chart-height-lg: 600px;         /* 大尺寸图表 */
}
```

#### 布局扩展设计原理
**问题背景**：原先PPT容器宽2400px，但内容区仅1400px，导致图表被挤压在中间，两侧大量留白浪费。

**解决方案**：
- PPT容器：2400px（保持）
- 内容区：1400px → 2100px（1.5倍扩展）
- KPI卡片：4列 → 6列（适配宽度）

**收益**：
- 图表横向展开，柱子更宽
- X轴标签间距增大，避免重叠
- 数据点分散，趋势更明显
- 视觉舒适性提升

### 8.3 组织模式系统（2025-12-21新增）
```javascript
/**
 * 组织模式配置
 * 支持5种模式：分公司、同城、异地、单机构、多机构
 */
const organizationModes = {
    // 分公司模式：显示所有三级机构（默认）
    branch: {
        name: '分公司',
        titlePrefix: '四川分公司',
        description: '显示所有三级机构数据',
        filter: null, // 不过滤，显示全部
        defaultSelection: 'all'
    },
    
    // 同城模式：仅显示同城5个机构
    local: {
        name: '同城',
        titlePrefix: '四川同城机构',
        description: '仅显示同城机构数据',
        filter: (organizations) => organizations.filter(org => 
            ['天府', '高新', '新都', '青羊', '武侯'].includes(org)
        ),
        defaultSelection: ['天府', '高新', '新都', '青羊', '武侯']
    },
    
    // 异地模式：仅显示异地7个机构
    remote: {
        name: '异地',
        titlePrefix: '四川异地机构',
        description: '仅显示异地机构数据',
        filter: (organizations) => organizations.filter(org => 
            ['宜宾', '泸州', '德阳', '资阳', '乐山', '自贡', '达州'].includes(org)
        ),
        defaultSelection: ['宜宾', '泸州', '德阳', '资阳', '乐山', '自贡', '达州']
    },
    
    // 单机构模式：仅显示单个机构
    single: {
        name: '单机构',
        titlePrefix: (selectedOrg) => `${selectedOrg}机构`,
        description: '仅显示单个机构数据',
        filter: (organizations, selectedOrg) => selectedOrg ? [selectedOrg] : organizations,
        defaultSelection: null, // 由用户选择
        requiresUserSelection: true
    },
    
    // 多机构模式：自定义多机构选择
    multi: {
        name: '多机构',
        titlePrefix: '四川多机构',
        description: '用户自定义多机构选择',
        filter: null, // 基于用户实际选择
        defaultSelection: null, // 基于用户实际选择
        isDerived: true // 根据用户选择自动判断
    }
};
```

#### 组织模式判断逻辑
```javascript
/**
 * 根据当前选择的机构判断组织模式
 * @param {Array} selectedOrgs - 用户选择的机构列表
 * @param {Array} allOrgs - 所有可用机构列表
 * @returns {Object} 当前组织模式配置
 */
function detectOrganizationMode(selectedOrgs, allOrgs) {
    const selectionCount = selectedOrgs.length;
    const totalCount = allOrgs.length;
    
    // 单机构模式
    if (selectionCount === 1) {
        return {
            ...organizationModes.single,
            currentOrg: selectedOrgs[0]
        };
    }
    
    // 同城模式检查
    const localOrgs = ['天府', '高新', '新都', '青羊', '武侯'];
    const isLocalMode = selectionCount === localOrgs.length && 
                      selectedOrgs.every(org => localOrgs.includes(org));
    
    if (isLocalMode) {
        return organizationModes.local;
    }
    
    // 异地模式检查
    const remoteOrgs = ['宜宾', '泸州', '德阳', '资阳', '乐山', '自贡', '达州'];
    const isRemoteMode = selectionCount === remoteOrgs.length && 
                       selectedOrgs.every(org => remoteOrgs.includes(org));
    
    if (isRemoteMode) {
        return organizationModes.remote;
    }
    
    // 分公司模式（全部选择）
    if (selectionCount === totalCount) {
        return organizationModes.branch;
    }
    
    // 多机构模式（其他自定义选择）
    return {
        ...organizationModes.multi,
        selectedOrgs: selectedOrgs
    };
}
```

#### 动态标题生成
```javascript
/**
 * 根据组织模式生成页面标题
 * @param {Object} modeConfig - 组织模式配置
 * @param {Object} context - 上下文信息（周次、年份等）
 * @returns {string} 页面标题
 */
function generatePageTitle(modeConfig, context) {
    const { week, year, company = '四川' } = context;
    
    if (typeof modeConfig.titlePrefix === 'function') {
        // 单机构模式的动态标题
        const prefix = modeConfig.titlePrefix(modeConfig.currentOrg);
        return `${prefix}车险第${week}周经营分析`;
    } else {
        // 其他模式的固定标题
        return `${modeConfig.titlePrefix}车险第${week}周经营分析`;
    }
}

// 使用示例
const context = { week: '50', year: '2025' };
const modeConfig = detectOrganizationMode(['天府', '高新', '新都', '青羊', '武侯'], allOrgs);
const title = generatePageTitle(modeConfig, context);
// 结果: "四川同城机构车险第50周经营分析"
```

### 8.4 响应式断点
```css
:root {
    /* === 响应式断点 === */
    --breakpoint-xs: 480px;
    --breakpoint-sm: 768px;
    --breakpoint-md: 1024px;
    --breakpoint-lg: 1440px;
    --breakpoint-xl: 1920px;
    --breakpoint-xxl: 2560px;
}
```

## 9. 组件设计规范

### 9.1 按钮组件
```css
/* === 主要按钮 === */
.btn-primary {
    background-color: var(--primary-red);
    color: var(--text-inverse);
    border: 1px solid var(--primary-red);
    border-radius: var(--border-radius-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    transition: var(--transition-normal);
    cursor: pointer;
}

.btn-primary:hover {
    background-color: #b92b27;
    border-color: #b92b27;
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

/* === 次要按钮 === */
.btn-secondary {
    background-color: transparent;
    color: var(--text-primary);
    border: 1px solid var(--border-medium);
    border-radius: var(--border-radius-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    transition: var(--transition-normal);
}

.btn-secondary:hover {
    border-color: var(--tesla-blue);
    color: var(--tesla-blue);
    background-color: rgba(0, 112, 192, 0.05);
}
```

### 9.2 卡片组件
```css
/* === 基础卡片 === */
.card {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(0, 0, 0, 0.04);
    border-radius: var(--border-radius-md);
    box-shadow: var(--shadow-md);
    transition: var(--transition-normal);
    overflow: hidden;
}

.card:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-2px);
}

/* === KPI卡片特殊样式 === */
.metric-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: var(--spacing-lg) var(--spacing-md);
}

.metric-value {
    font-size: var(--font-size-xxxl);
    font-weight: var(--font-weight-semibold);
    line-height: var(--line-height-tight);
    letter-spacing: -1.5px;
    margin-bottom: var(--spacing-sm);
}
```

### 9.3 筛选器组件
```css
/* === 筛选器按钮 === */
.filter-selector {
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid var(--border-light);
    border-radius: var(--border-radius-sm);
    padding: var(--spacing-sm) var(--spacing-md);
    min-width: 120px;
    transition: var(--transition-normal);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.filter-selector:hover {
    border-color: var(--tesla-blue);
    box-shadow: var(--shadow-sm);
}

.filter-selector.active {
    background-color: var(--tesla-blue);
    color: var(--text-inverse);
    border-color: var(--tesla-blue);
}

.filter-selector.has-selection {
    background-color: rgba(0, 112, 192, 0.05);
    border-color: var(--tesla-blue);
    color: var(--tesla-blue);
}
```

## 10. 图表设计规范

### 10.1 图表通用配置
```javascript
const chartDefaults = {
    // 通用颜色配置
    colors: [
        '#0070c0', '#00b050', '#ffc000', '#c00000', '#808080'
    ],
    
    // 通用字体配置
    textStyle: {
        fontFamily: 'var(--font-family-primary)',
        fontSize: 12,
        color: 'var(--text-primary)'
    },
    
    // 通用动画配置
    animation: true,
    animationDuration: 800,
    animationEasing: 'cubicOut'
};
```

### 10.2 图表标签规范
```javascript
// 柱状图标签配置
const barLabelConfig = {
    show: true,
    position: 'top',
    formatter: (params) => {
        // 自动调整文字大小
        const maxLength = 8;
        const text = String(params.value);
        if (text.length > maxLength) {
            return text.substring(0, maxLength) + '...';
        }
        return text;
    },
    color: 'var(--text-primary)',
    fontSize: 12,
    fontWeight: 600
};

// 散点图标签配置
const scatterLabelConfig = {
    show: true,
    position: 'top',
    formatter: (params) => {
        const name = wrapTextByCharCount(params.data.name, 6);
        const value = formatNumber(params.data.value[2]);
        return `${name}\n${value}`;
    },
    color: 'var(--text-primary)',
    fontSize: 12,
    textBorderColor: 'rgba(255, 255, 255, 0.8)',
    textBorderWidth: 2
};
```

### 10.3 预警线规范
```javascript
// 预警线配置
const warningLineConfig = {
    silent: false,
    symbol: ['none', 'none'],
    lineStyle: {
        color: 'var(--chart-warning-dash)',
        type: 'dashed',
        width: 2
    },
    label: {
        show: true,
        position: 'end',
        formatter: '{b}: {c}%',
        color: 'var(--chart-warning-dash)',
        fontSize: 12,
        fontWeight: 600
    }
};
```

### 10.4 经营概览堆积图规范（2025-12-21新增）

#### 设计原则
- **颜色识别性**：满期赔付率使用浅蓝色，费用率使用浅灰色，便于区分
- **标签可读性**：标签放置在柱内，使用深色字体确保对比度
- **Y轴一致性**：左右Y轴刻度范围一致，避免视觉误导

#### 配置示例
```javascript
// 经营概览堆积图配置
const overviewStackedBarConfig = {
    yAxis: [
        {
            // 左Y轴 - 堆积图（满期赔付率 + 费用率）
            type: 'value',
            name: '占比(%)',
            min: 0,
            max: dimension === 'org' ? 150 : 100, // 与右轴保持一致
            position: 'left'
        },
        {
            // 右Y轴 - 达成率折线
            type: 'value',
            name: '保费时间进度达成率(%)',
            min: 0,
            max: dimension === 'org' ? 150 : 100, // 与左轴保持一致
            position: 'right'
        }
    ],
    series: [
        {
            name: '满期赔付率',
            type: 'bar',
            yAxisIndex: 0,
            itemStyle: { color: '#87ceeb' },  // 浅蓝色
            label: {
                show: true,
                position: 'inside',  // 柱内显示
                color: '#333333',    // 深色字体
                formatter: (p) => `${formatRate(p.value, 1)}%`
            },
            stack: 'rates'
        },
        {
            name: '费用率',
            type: 'bar',
            yAxisIndex: 0,
            itemStyle: { color: '#d3d3d3' },  // 浅灰色
            label: {
                show: true,
                position: 'inside',  // 柱内显示
                color: '#333333',    // 深色字体
                formatter: (p) => `${formatRate(p.value, 1)}%`
            },
            stack: 'rates'
        },
        {
            name: '保费时间进度达成率',
            type: 'line',
            yAxisIndex: 1,
            lineStyle: { color: '#808080', width: 2 },  // 灰色连线
            itemStyle: { color: '#808080', borderWidth: 2 },
            label: {
                show: true,
                position: 'top',  // 数据点上方
                color: '#333333',
                fontWeight: 'bold',
                formatter: (p) => `${formatRate(p.value, 1)}%`
            },
            symbolSize: 6
        }
    ]
};
```

#### 关键技术要点
1. **双Y轴刻度一致性**：左右Y轴必须使用相同的min/max范围，避免数值大但视觉位置低的误导
2. **颜色对比度**：标签使用#333333深色字体，确保在浅色柱上清晰可读
3. **堆积逻辑**：满期赔付率和费用率使用相同的`stack: 'rates'`实现堆积效果

## 11. 交互设计规范

### 11.1 焦点管理
```css
/* === 焦点样式 === */
.focusable:focus {
    outline: none;
    box-shadow: var(--shadow-focus);
}

/* === 键盘导航高亮 === */
.keyboard-highlight {
    outline: 2px solid var(--tesla-blue);
    outline-offset: 2px;
}
```

### 11.2 加载状态
```css
/* === 加载指示器 === */
.loading {
    position: relative;
    pointer-events: none;
}

.loading::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    margin: -10px 0 0 -10px;
    border: 2px solid var(--border-light);
    border-top-color: var(--tesla-blue);
    border-radius: var(--border-radius-full);
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}
```

### 11.3 空状态
```css
/* === 空状态容器 === */
.empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-xxl);
    color: var(--text-muted);
    text-align: center;
}

.empty-state-icon {
    font-size: var(--font-size-xxxl);
    margin-bottom: var(--spacing-md);
    opacity: 0.5;
}

.empty-state-text {
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);
}
```

## 12. 响应式设计规范

### 12.1 移动端适配
```css
/* === 移动端布局 === */
@media (max-width: 768px) {
    :root {
        --container-width: 100%;
        --grid-cols-4: var(--grid-cols-1);
        --spacing-lg: var(--spacing-md);
        --font-size-xxxl: 32px;
    }
    
    .metric-cards {
        grid-template-columns: 1fr;
        gap: var(--spacing-md);
    }
    
    .tabs {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
}
```

### 12.2 平板适配
```css
/* === 平板布局 === */
@media (min-width: 769px) and (max-width: 1024px) {
    :root {
        --container-width: var(--container-width-sm);
        --grid-cols-4: var(--grid-cols-2);
        --font-size-xxxl: 40px;
    }
    
    .metric-cards {
        grid-template-columns: repeat(2, 1fr);
    }
}
```

## 13. 可访问性规范

### 13.1 颜色对比度
所有文本与背景的对比度应满足WCAG AA标准：
- 正常文本：至少4.5:1
- 大文本：至少3:1
- 非文本元素：至少3:1

### 13.2 键盘导航
所有交互元素都应支持键盘访问：
- Tab键顺序逻辑清晰
- 焦点状态明显可见
- 支持Enter/Space激活

### 13.3 屏幕阅读器
```html
<!-- 语义化HTML结构 -->
<main role="main">
    <section aria-labelledby="overview-heading">
        <h2 id="overview-heading">经营概览</h2>
        <div role="tablist">
            <button role="tab" aria-selected="true" aria-controls="kpi-panel">KPI</button>
            <button role="tab" aria-selected="false" aria-controls="org-panel">三级机构</button>
        </div>
        <div id="kpi-panel" role="tabpanel" aria-labelledby="kpi-tab">
            <!-- KPI内容 -->
        </div>
    </section>
</main>
```

## 14. 使用指南

### 14.1 CSS变量使用
```css
/* 正确使用方式 */
.component {
    background-color: var(--primary-red);      /* ✅ 使用变量 */
    padding: var(--spacing-md);               /* ✅ 使用变量 */
    border-radius: var(--border-radius-sm);   /* ✅ 使用变量 */
}

/* 错误使用方式 */
.component {
    background-color: #a02724;               /* ❌ 硬编码颜色 */
    padding: 16px;                           /* ❌ 硬编码间距 */
    border-radius: 8px;                       /* ❌ 硬编码圆角 */
}
```

### 14.2 组件扩展
```css
/* 新建组件时继承系统变量 */
.new-component {
    /* 继承基础样式 */
    font-family: var(--font-family-primary);
    font-size: var(--font-size-base);
    color: var(--text-primary);
    
    /* 继承间距系统 */
    margin: var(--spacing-md);
    padding: var(--spacing-sm);
    
    /* 继承交互样式 */
    border-radius: var(--border-radius-sm);
    transition: var(--transition-normal);
    box-shadow: var(--shadow-sm);
}
```

## 15. 版本管理

### 15.1 版本号规则
采用语义化版本控制：`主版本.次版本.修订版本`
- 主版本：重大架构变更
- 次版本：新增功能特性
- 修订版本：Bug修复和优化

### 15.2 变更记录
每个版本都应记录：
- 新增的设计变量
- 修改的设计规范
- 废弃的旧规范
- 迁移指南

## 总结

本设计规范基于现有系统的优秀实践，通过系统化的变量定义和使用指南，确保：

1. **一致性**: 所有组件遵循统一的设计语言
2. **可维护性**: 通过CSS变量实现全局管理
3. **可扩展性**: 为未来功能扩展提供基础
4. **可访问性**: 符合Web可访问性标准
5. **性能友好**: 避免过度的视觉效果

严格遵循本规范将确保整个系统的视觉统一性和用户体验的一致性。