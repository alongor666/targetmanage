# ğŸ§© ç»„ä»¶è®¾è®¡è§„èŒƒ

> React ç»„ä»¶çš„è¯¦ç»†è®¾è®¡è§„èŒƒä¸äº¤äº’æ ‡å‡†  
> åŸºäº [å…¨å±€è®¾è®¡è§„èŒƒ](./å…¨å±€è®¾è®¡è§„èŒƒ.md) å’Œ [è®¾è®¡å®ç°æŒ‡å—](./è®¾è®¡å®ç°æŒ‡å—.md)

**ç‰ˆæœ¬:** 2.1.0
**æ›´æ–°æ—¶é—´:** 2025-12-23  
**æŠ€æœ¯æ ˆ:** React 18 + TypeScript 5 + Tailwind CSS 3

---

## ğŸ“‘ ç»„ä»¶ç›®å½•

- [ç»„ä»¶è®¾è®¡åŸåˆ™](#-ç»„ä»¶è®¾è®¡åŸåˆ™)
- [æ ¸å¿ƒç»„ä»¶åº“](#-æ ¸å¿ƒç»„ä»¶åº“)
- [äº¤äº’è§„èŒƒ](#-äº¤äº’è§„èŒƒ)
- [çŠ¶æ€ç®¡ç†](#-çŠ¶æ€ç®¡ç†)
- [å¯è®¿é—®æ€§](#-å¯è®¿é—®æ€§)
- [æ€§èƒ½ä¼˜åŒ–](#-æ€§èƒ½ä¼˜åŒ–)

---

## ğŸ¯ ç»„ä»¶è®¾è®¡åŸåˆ™

### 1. ä¸€è‡´æ€§åŸåˆ™
- **è§†è§‰ä¸€è‡´æ€§**: æ‰€æœ‰ç»„ä»¶éµå¾ªç»Ÿä¸€çš„ [å…¨å±€è®¾è®¡è§„èŒƒ](./å…¨å±€è®¾è®¡è§„èŒƒ.md)
- **äº¤äº’ä¸€è‡´æ€§**: ç›¸åŒåŠŸèƒ½çš„ç»„ä»¶å…·æœ‰ç›¸åŒçš„äº¤äº’è¡Œä¸º
- **API ä¸€è‡´æ€§**: ç»„ä»¶æ¥å£è®¾è®¡éµå¾ªç»Ÿä¸€çš„å‘½åå’Œå‚æ•°è§„èŒƒ

### 2. å¯å¤ç”¨æ€§åŸåˆ™
- **å•ä¸€èŒè´£**: æ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„åŠŸèƒ½
- **é«˜å†…èšä½è€¦åˆ**: ç»„ä»¶å†…éƒ¨é€»è¾‘ç´§å¯†ï¼Œå¯¹å¤–ä¾èµ–æœ€å°
- **é…ç½®é©±åŠ¨**: é€šè¿‡ props æ§åˆ¶ç»„ä»¶è¡Œä¸ºï¼Œé¿å…ç¡¬ç¼–ç 

### 3. å¯ç»´æŠ¤æ€§åŸåˆ™
- **ç±»å‹å®‰å…¨**: ä½¿ç”¨ TypeScript å®šä¹‰å®Œæ•´çš„ Props ç±»å‹
- **æ–‡æ¡£å®Œæ•´**: æ¯ä¸ªç»„ä»¶éƒ½æœ‰æ¸…æ™°çš„ JSDoc æ³¨é‡Šå’Œä½¿ç”¨ç¤ºä¾‹
- **æµ‹è¯•è¦†ç›–**: æ ¸å¿ƒç»„ä»¶éƒ½æœ‰å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

---

## ğŸ§° æ ¸å¿ƒç»„ä»¶åº“

### ğŸ“Š KpiCard - KPIæŒ‡æ ‡å¡ç‰‡

**ç”¨é€”**: å±•ç¤ºå…³é”®ç»©æ•ˆæŒ‡æ ‡çš„æ ¸å¿ƒç»„ä»¶

```typescript
interface KpiCardProps {
  /** å¡ç‰‡æ ‡é¢˜ */
  title: string;
  /** æŒ‡æ ‡å€¼ */
  value: string | number;
  /** çŠ¶æ€å˜ä½“ */
  variant?: 'default' | 'good' | 'warning' | 'danger';
  /** æç¤ºä¿¡æ¯ */
  hint?: string;
  /** ç‚¹å‡»äº‹ä»¶ */
  onClick?: () => void;
  /** æ˜¯å¦åŠ è½½ä¸­ */
  loading?: boolean;
  /** è‡ªå®šä¹‰å›¾æ ‡ */
  icon?: React.ReactNode;
  /** è¶‹åŠ¿æ–¹å‘ */
  trend?: 'up' | 'down' | 'stable';
  /** è¶‹åŠ¿å€¼ */
  trendValue?: string;
}

/**
 * KPIå¡ç‰‡ç»„ä»¶
 * ä½ç½®: src/components/kpi/KpiCard.tsx
 */
export function KpiCard(props: KpiCardProps) {
  // å®ç°ç»†èŠ‚...
}
```

**è®¾è®¡è¦æ±‚**:
- å°ºå¯¸: å®½åº¦è‡ªé€‚åº”ï¼Œé«˜åº¦æ ¹æ®å†…å®¹è‡ªé€‚åº”
- åœ†è§’: `rounded-xl` (20px)
- é˜´å½±: `shadow-md`ï¼Œæ‚¬åœæ—¶ `shadow-lg`
- å†…è¾¹è·: `p-4` (16px)
- èƒŒæ™¯: ç™½è‰²åŠé€æ˜ `bg-white/95`ï¼Œå¸¦æ¨¡ç³Šæ•ˆæœ

**çŠ¶æ€æ˜ å°„**:
| çŠ¶æ€ | èƒŒæ™¯è‰² | è¾¹æ¡†è‰² | æ–‡å­—è‰² |
|------|--------|--------|--------|
| default | ç™½è‰² | `border-border-light` | `text-text-primary` |
| good | `bg-status-good/10` | `border-status-good/20` | `text-status-good` |
| warning | `bg-status-warning/10` | `border-status-warning/20` | `text-status-warning` |
| danger | `bg-status-danger/10` | `border-status-danger/20` | `text-status-danger` |

**ä½¿ç”¨ç¤ºä¾‹**:
```tsx
<KpiCard 
  title="å¹´åº¦ç›®æ ‡"
  value="12,345.67"
  variant="good"
  hint="ä¸‡å…ƒ"
  onClick={() => console.log('ç‚¹å‡»å¡ç‰‡')}
  trend="up"
  trendValue="+12.5%"
/>
```

### ğŸ›ï¸ FilterSelector - ç­›é€‰é€‰æ‹©å™¨

**ç”¨é€”**: ç»Ÿä¸€çš„ä¸‹æ‹‰ç­›é€‰ç»„ä»¶

```typescript
interface FilterSelectorProps<T> {
  /** æ ‡ç­¾æ–‡æœ¬ */
  label: string;
  /** å½“å‰å€¼ */
  value: T;
  /** å€¼å˜æ›´å›è°ƒ */
  onChange: (value: T) => void;
  /** é€‰é¡¹åˆ—è¡¨ */
  options: Array<{ value: T; label: string; disabled?: boolean }>;
  /** å ä½ç¬¦ */
  placeholder?: string;
  /** æ˜¯å¦ç¦ç”¨ */
  disabled?: boolean;
  /** æ˜¯å¦æ”¯æŒå¤šé€‰ */
  multiple?: boolean;
  /** æœ€å¤§æ˜¾ç¤ºæ•°é‡ */
  maxDisplay?: number;
}

/**
 * ç­›é€‰å™¨é€‰æ‹©ç»„ä»¶
 * ä½ç½®: src/components/ui/FilterSelector.tsx
 */
export function FilterSelector<T>(props: FilterSelectorProps<T>) {
  // å®ç°ç»†èŠ‚...
}
```

**è®¾è®¡è¦æ±‚**:
- é«˜åº¦: 40px (æ ‡ç­¾16px + é€‰æ‹©å™¨24px)
- åœ†è§’: `rounded-sm` (8px)
- è¾¹æ¡†: `border-border-light`ï¼Œèšç„¦æ—¶ `border-tesla`
- èƒŒæ™¯: `bg-white/90`ï¼Œé€‰ä¸­æ—¶ `bg-tesla/5`
- è¿‡æ¸¡: `transition-normal` (250ms)

**äº¤äº’çŠ¶æ€**:
| çŠ¶æ€ | èƒŒæ™¯ | è¾¹æ¡† | æ–‡å­— | é˜´å½± |
|------|------|------|------|------|
| é»˜è®¤ | ç™½è‰²åŠé€æ˜ | æµ…ç° | ä¸»è‰² | æ—  |
| æ‚¬åœ | ç™½è‰² | ç‰¹æ–¯æ‹‰è“ | ä¸»è‰² | `shadow-sm` |
| é€‰ä¸­ | ç‰¹æ–¯æ‹‰è“5% | ç‰¹æ–¯æ‹‰è“ | ç‰¹æ–¯æ‹‰è“ | `shadow-sm` |
| ç¦ç”¨ | æµ…ç° | æµ…ç° | è¾…åŠ©è‰² | æ—  |
| èšç„¦ | ç™½è‰² | ç‰¹æ–¯æ‹‰è“ | ä¸»è‰² | `shadow-focus` |

**ä½¿ç”¨ç¤ºä¾‹**:
```tsx
<FilterSelector
  label="äº§å“ç±»å‹"
  value={product}
  onChange={setProduct}
  options={[
    { value: 'total', label: 'æ±‡æ€»' },
    { value: 'auto', label: 'è½¦é™©' },
    { value: 'property', label: 'è´¢äº§é™©' }
  ]}
  placeholder="è¯·é€‰æ‹©äº§å“"
/>
```

### ğŸ“ˆ ChartContainer - å›¾è¡¨å®¹å™¨

**ç”¨é€”**: ç»Ÿä¸€çš„å›¾è¡¨å±•ç¤ºå®¹å™¨

```typescript
interface ChartContainerProps {
  /** å›¾è¡¨æ ‡é¢˜ */
  title?: string;
  /** å‰¯æ ‡é¢˜ */
  subtitle?: string;
  /** å®¹å™¨é«˜åº¦ */
  height?: 'sm' | 'md' | 'lg' | number;
  /** æ“ä½œæŒ‰é’®åŒºåŸŸ */
  actions?: React.ReactNode;
  /** åŠ è½½çŠ¶æ€ */
  loading?: boolean;
  /** é”™è¯¯çŠ¶æ€ */
  error?: string;
  /** ç©ºæ•°æ®çŠ¶æ€ */
  empty?: boolean;
  /** å­å…ƒç´  */
  children: React.ReactNode;
}

/**
 * å›¾è¡¨å®¹å™¨ç»„ä»¶
 * ä½ç½®: src/components/charts/ChartContainer.tsx
 */
export function ChartContainer(props: ChartContainerProps) {
  // å®ç°ç»†èŠ‚...
}
```

**è®¾è®¡è¦æ±‚**:
- åœ†è§’: `rounded-xl` (20px)
- é˜´å½±: `shadow-md`
- å†…è¾¹è·: `p-4` (16px)
- èƒŒæ™¯: ç™½è‰² `bg-white`
- è¾¹æ¡†: `border-border-light`

**é«˜åº¦æ˜ å°„**:
| é«˜åº¦ | CSS ç±» | åƒç´ å€¼ | ç”¨é€” |
|------|--------|--------|------|
| sm | `h-96` | 400px | å°å‹å›¾è¡¨ |
| md | `h-[500px]` | 500px | ä¸­å‹å›¾è¡¨ |
| lg | `h-[600px]` | 600px | æ ‡å‡†å›¾è¡¨ |

**ä½¿ç”¨ç¤ºä¾‹**:
```tsx
<ChartContainer 
  title="æœˆåº¦ç›®æ ‡åˆ†è§£"
  subtitle="2025å¹´åº¦å„æœˆä»½ç›®æ ‡åˆ†å¸ƒ"
  height="lg"
  actions={
    <button className="text-tesla text-sm">å¯¼å‡º</button>
  }
>
  <ReactECharts option={chartOption} />
</ChartContainer>
```

### ğŸ“‹ DataTable - æ•°æ®è¡¨æ ¼

**ç”¨é€”**: ç»“æ„åŒ–æ•°æ®å±•ç¤º

```typescript
interface DataTableProps<T> {
  /** æ•°æ®æº */
  data: T[];
  /** åˆ—å®šä¹‰ */
  columns: ColumnDef<T>[];
  /** æ˜¯å¦æ˜¾ç¤ºè¾¹æ¡† */
  bordered?: boolean;
  /** æ–‘é©¬çº¹ */
  striped?: boolean;
  /** æ‚¬åœé«˜äº® */
  hoverable?: boolean;
  /** ç´§å‡‘æ¨¡å¼ */
  compact?: boolean;
  /** æ’åºé…ç½® */
  sortable?: boolean;
  /** åˆ†é¡µé…ç½® */
  pagination?: PaginationConfig;
}

/**
 * æ•°æ®è¡¨æ ¼ç»„ä»¶
 * ä½ç½®: src/components/ui/DataTable.tsx
 */
export function DataTable<T>(props: DataTableProps<T>) {
  // å®ç°ç»†èŠ‚...
}
```

**è®¾è®¡è¦æ±‚**:
- è¡¨å¤´: `text-text-secondary`ï¼Œå­—é‡ `font-medium`
- è¾¹æ¡†: `border-border-light`
- æ‚¬åœ: `hover:bg-secondary/50`
- é€‰ä¸­: `bg-tesla/10 border-l-2 border-l-tesla`

**ä½¿ç”¨ç¤ºä¾‹**:
```tsx
<DataTable
  data={organizations}
  columns={[
    { key: 'name', title: 'æœºæ„åç§°', sortable: true },
    { key: 'target', title: 'å¹´åº¦ç›®æ ‡', format: formatCurrency },
    { key: 'achievement', title: 'è¾¾æˆç‡', format: formatPercent }
  ]}
  bordered
  hoverable
  compact
/>
```

---

## ğŸ­ äº¤äº’è§„èŒƒ

### ğŸ–±ï¸ é¼ æ ‡äº¤äº’

#### æ‚¬åœçŠ¶æ€ (Hover)
```css
/* ç»Ÿä¸€æ‚¬åœæ ·å¼ */
.hover-primary:hover {
  background-color: rgba(0, 112, 192, 0.05);
  border-color: var(--tesla-blue);
}

.hover-elevate:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-lg);
}
```

#### ç‚¹å‡»åé¦ˆ (Active)
```css
/* ç‚¹å‡»çŠ¶æ€ */
.active-primary:active {
  transform: translateY(0);
  box-shadow: var(--shadow-md);
}

/* é€‰ä¸­çŠ¶æ€ */
.selected {
  background-color: var(--tesla-blue);
  color: var(--text-inverse);
  border-color: var(--tesla-blue);
}
```

### âŒ¨ï¸ é”®ç›˜äº¤äº’

#### ç„¦ç‚¹ç®¡ç†
```typescript
// ç„¦ç‚¹æ ·å¼
const focusStyles = 'focus:outline-none focus:ring-2 focus:ring-tesla focus:ring-offset-2';

// é”®ç›˜å¯¼èˆª
function useKeyboardNavigation(items: string[]) {
  const [focusedIndex, setFocusedIndex] = useState(-1);
  
  const handleKeyDown = (event: KeyboardEvent) => {
    switch (event.key) {
      case 'ArrowDown':
        setFocusedIndex(prev => Math.min(prev + 1, items.length - 1));
        break;
      case 'ArrowUp':
        setFocusedIndex(prev => Math.max(prev - 1, 0));
        break;
      case 'Enter':
      case ' ':
        // æ‰§è¡Œé€‰æ‹©æ“ä½œ
        break;
    }
  };
  
  return { focusedIndex, handleKeyDown };
}
```

### ğŸ“± è§¦æ‘¸äº¤äº’

#### æ‰‹åŠ¿æ”¯æŒ
```typescript
// æ»‘åŠ¨æ‰‹åŠ¿æ£€æµ‹
function useSwipeGesture() {
  const [startX, setStartX] = useState(0);
  const [startY, setStartY] = useState(0);
  
  const handleTouchStart = (e: TouchEvent) => {
    setStartX(e.touches[0].clientX);
    setStartY(e.touches[0].clientY);
  };
  
  const handleTouchEnd = (e: TouchEvent) => {
    const deltaX = e.changedTouches[0].clientX - startX;
    const deltaY = e.changedTouches[0].clientY - startY;
    
    if (Math.abs(deltaX) > 50) {
      // æ°´å¹³æ»‘åŠ¨
      if (deltaX > 0) {
        // å‘å³æ»‘åŠ¨
      } else {
        // å‘å·¦æ»‘åŠ¨
      }
    }
  };
  
  return { handleTouchStart, handleTouchEnd };
}
```

---

## ğŸ”„ çŠ¶æ€ç®¡ç†

### ğŸ¯ çŠ¶æ€æ¨¡å¼

#### åŠ è½½çŠ¶æ€
```typescript
interface LoadingState {
  loading: boolean;
  error?: string;
  data?: any;
}

// ç»Ÿä¸€çš„åŠ è½½çŠ¶æ€å¤„ç†
function useAsyncState<T>(asyncFn: () => Promise<T>) {
  const [state, setState] = useState<LoadingState>({ loading: false });
  
  const execute = useCallback(async () => {
    setState({ loading: true });
    try {
      const data = await asyncFn();
      setState({ loading: false, data });
    } catch (error) {
      setState({ loading: false, error: error.message });
    }
  }, [asyncFn]);
  
  return { ...state, execute };
}
```

#### è¡¨å•çŠ¶æ€
```typescript
interface FormState<T> {
  values: T;
  errors: Partial<Record<keyof T, string>>;
  touched: Partial<Record<keyof T, boolean>>;
  dirty: boolean;
  valid: boolean;
}

// è¡¨å•çŠ¶æ€ç®¡ç†
function useFormState<T extends Record<string, any>>(
  initialValues: T,
  validation: ValidationSchema<T>
) {
  const [state, setState] = useState<FormState<T>>({
    values: initialValues,
    errors: {},
    touched: {},
    dirty: false,
    valid: true
  });
  
  const setValue = useCallback((name: keyof T, value: any) => {
    setState(prev => ({
      ...prev,
      values: { ...prev.values, [name]: value },
      touched: { ...prev.touched, [name]: true },
      dirty: true
    }));
  }, []);
  
  const setError = useCallback((name: keyof T, error: string) => {
    setState(prev => ({
      ...prev,
      errors: { ...prev.errors, [name]: error }
    }));
  }, []);
  
  return { state, setValue, setError };
}
```

### ğŸ”„ ä¸Šä¸‹æ–‡ç®¡ç†

#### ä¸»é¢˜ä¸Šä¸‹æ–‡
```typescript
interface ThemeContext {
  theme: 'light' | 'dark';
  toggleTheme: () => void;
  colors: ColorPalette;
}

const ThemeContext = createContext<ThemeContext | undefined>(undefined);

export function ThemeProvider({ children }: { children: React.ReactNode }) {
  const [theme, setTheme] = useState<'light' | 'dark'>('light');
  
  const toggleTheme = useCallback(() => {
    setTheme(prev => prev === 'light' ? 'dark' : 'light');
  }, []);
  
  const colors = useMemo(() => 
    theme === 'light' ? lightColors : darkColors, 
    [theme]
  );
  
  return (
    <ThemeContext.Provider value={{ theme, toggleTheme, colors }}>
      {children}
    </ThemeContext.Provider>
  );
}
```

---

## â™¿ å¯è®¿é—®æ€§

### ğŸ¯ ARIA å±æ€§

#### è¯­ä¹‰åŒ–æ ‡è®°
```tsx
// KPIå¡ç‰‡å¯è®¿é—®æ€§
<div 
  role="article"
  aria-labelledby={`kpi-title-${id}`}
  aria-describedby={`kpi-value-${id} ${kpi-hint-${id}`}
  tabIndex={onClick ? 0 : undefined}
  onClick={onClick}
  onKeyDown={handleKeyDown}
>
  <h3 id={`kpi-title-${id}`} className="sr-only">{title}</h3>
  <p id={`kpi-value-${id}`} aria-live="polite">{value}</p>
  {hint && <span id={`kpi-hint-${id}`}>{hint}</span>}
</div>
```

#### é”®ç›˜å¯¼èˆª
```tsx
// ç­›é€‰å™¨é”®ç›˜å¯¼èˆª
function FilterSelector<T>(props: FilterSelectorProps<T>) {
  const listboxRef = useRef<HTMLUListElement>(null);
  
  const handleKeyDown = (event: KeyboardEvent) => {
    switch (event.key) {
      case 'ArrowDown':
        event.preventDefault();
        focusNextItem();
        break;
      case 'ArrowUp':
        event.preventDefault();
        focusPreviousItem();
        break;
      case 'Escape':
        setIsOpen(false);
        triggerRef.current?.focus();
        break;
    }
  };
  
  return (
    <div role="combobox" aria-expanded={isOpen}>
      <button
        ref={triggerRef}
        aria-haspopup="listbox"
        aria-labelledby={labelId}
      >
        {selectedLabel}
      </button>
      {isOpen && (
        <ul
          ref={listboxRef}
          role="listbox"
          aria-activedescendant={activeDescendant}
          onKeyDown={handleKeyDown}
        >
          {options.map((option, index) => (
            <li
              key={option.value}
              role="option"
              aria-selected={option.value === value}
              id={`option-${index}`}
            >
              {option.label}
            </li>
          ))}
        </ul>
      )}
    </div>
  );
}
```

### ğŸ¯ å±å¹•é˜…è¯»å™¨æ”¯æŒ

#### æè¿°æ€§æ–‡æœ¬
```tsx
// å›¾è¡¨å¯è®¿é—®æ€§
function AccessibleChart({ data, title, description }) {
  return (
    <div role="img" aria-label={title} aria-describedby="chart-description">
      {/* å›¾è¡¨å¯è§†åŒ– */}
      <ReactECharts option={chartOption} />
      
      {/* å±å¹•é˜…è¯»å™¨æè¿° */}
      <div id="chart-description" className="sr-only">
        {description}
        <table>
          <thead>
            <tr>
              <th>æœˆä»½</th>
              <th>ç›®æ ‡</th>
              <th>å®é™…</th>
              <th>è¾¾æˆç‡</th>
            </tr>
          </thead>
          <tbody>
            {data.map((row, index) => (
              <tr key={index}>
                <td>{row.month}</td>
                <td>{row.target}</td>
                <td>{row.actual}</td>
                <td>{row.achievement}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  );
}
```

---

## âš¡ æ€§èƒ½ä¼˜åŒ–

### ğŸ”„ ç»„ä»¶ä¼˜åŒ–

#### React.memo ä½¿ç”¨
```typescript
// KPIå¡ç‰‡ä¼˜åŒ–
const KpiCard = React.memo<KpiCardProps>(({ 
  title, 
  value, 
  variant = 'default',
  hint,
  onClick,
  loading = false,
  icon,
  trend,
  trendValue
}) => {
  // ç»„ä»¶å®ç°
}, (prevProps, nextProps) => {
  // è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°
  return (
    prevProps.title === nextProps.title &&
    prevProps.value === nextProps.value &&
    prevProps.variant === nextProps.variant &&
    prevProps.loading === nextProps.loading
  );
});
```

#### useMemo å’Œ useCallback
```typescript
// å›¾è¡¨æ•°æ®å¤„ç†ä¼˜åŒ–
function ChartContainer({ data, height = 'lg' }) {
  const processedData = useMemo(() => {
    return data.map(item => ({
      ...item,
      formattedValue: formatCurrency(item.value),
      color: getStatusColor(item.status)
    }));
  }, [data]);
  
  const chartOption = useMemo(() => {
    return generateChartOption(processedData);
  }, [processedData]);
  
  return (
    <div className={`chart-container ${height}`}>
      <ReactECharts option={chartOption} />
    </div>
  );
}
```

### ğŸ¯ è™šæ‹ŸåŒ–åˆ—è¡¨

#### å¤§æ•°æ®é‡è¡¨æ ¼
```typescript
// è™šæ‹ŸåŒ–è¡¨æ ¼ç»„ä»¶
import { FixedSizeList as List } from 'react-window';

function VirtualizedTable({ data, columns, height = 400 }) {
  const Row = useCallback(({ index, style }) => {
    const rowData = data[index];
    
    return (
      <div style={style} className="flex border-b">
        {columns.map((column, colIndex) => (
          <div
            key={colIndex}
            className="flex-1 px-2 py-1"
            style={{ width: column.width }}
          >
            {column.render ? column.render(rowData[column.key]) : rowData[column.key]}
          </div>
        ))}
      </div>
    );
  }, [data, columns]);
  
  return (
    <div className="border rounded">
      {/* è¡¨å¤´ */}
      <div className="flex bg-gray-50 border-b">
        {columns.map((column, index) => (
          <div
            key={index}
            className="flex-1 px-2 py-2 font-medium"
            style={{ width: column.width }}
          >
            {column.title}
          </div>
        ))}
      </div>
      
      {/* è™šæ‹ŸåŒ–åˆ—è¡¨ */}
      <List
        height={height}
        itemCount={data.length}
        itemSize={40}
        itemData={data}
      >
        {Row}
      </List>
    </div>
  );
}
```

---

## ğŸ§ª æµ‹è¯•è§„èŒƒ

### ğŸ¯ å•å…ƒæµ‹è¯•

#### ç»„ä»¶æµ‹è¯•æ¨¡æ¿
```typescript
// KpiCard.test.tsx
import { render, screen, fireEvent } from '@testing-library/react';
import { KpiCard } from './KpiCard';

describe('KpiCard', () => {
  const defaultProps = {
    title: 'å¹´åº¦ç›®æ ‡',
    value: '12345.67',
  };

  it('åº”è¯¥æ­£ç¡®æ¸²æŸ“æ ‡é¢˜å’Œå€¼', () => {
    render(<KpiCard {...defaultProps} />);
    
    expect(screen.getByText('å¹´åº¦ç›®æ ‡')).toBeInTheDocument();
    expect(screen.getByText('12345.67')).toBeInTheDocument();
  });

  it('åº”è¯¥åº”ç”¨æ­£ç¡®çš„çŠ¶æ€æ ·å¼', () => {
    render(<KpiCard {...defaultProps} variant="good" />);
    
    const card = screen.getByRole('article');
    expect(card).toHaveClass('bg-status-good/10');
  });

  it('åº”è¯¥å“åº”ç‚¹å‡»äº‹ä»¶', () => {
    const handleClick = vi.fn();
    render(<KpiCard {...defaultProps} onClick={handleClick} />);
    
    fireEvent.click(screen.getByRole('article'));
    expect(handleClick).toHaveBeenCalledTimes(1);
  });

  it('åº”è¯¥æ˜¾ç¤ºåŠ è½½çŠ¶æ€', () => {
    render(<KpiCard {...defaultProps} loading={true} />);
    
    expect(screen.getByTestId('loading-spinner')).toBeInTheDocument();
  });
});
```

### ğŸ¯ é›†æˆæµ‹è¯•

#### ç”¨æˆ·äº¤äº’æµ‹è¯•
```typescript
// FilterSelector.integration.test.tsx
import { render, screen, waitFor } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import { FilterSelector } from './FilterSelector';

describe('FilterSelector Integration', () => {
  it('åº”è¯¥å…è®¸ç”¨æˆ·é€‰æ‹©é€‰é¡¹', async () => {
    const handleChange = vi.fn();
    const options = [
      { value: 'auto', label: 'è½¦é™©' },
      { value: 'property', label: 'è´¢äº§é™©' }
    ];

    render(
      <FilterSelector
        label="äº§å“"
        value=""
        onChange={handleChange}
        options={options}
      />
    );

    // æ‰“å¼€ä¸‹æ‹‰æ¡†
    await userEvent.click(screen.getByRole('button'));
    
    // é€‰æ‹©é€‰é¡¹
    await userEvent.click(screen.getByText('è½¦é™©'));
    
    // éªŒè¯å›è°ƒ
    await waitFor(() => {
      expect(handleChange).toHaveBeenCalledWith('auto');
    });
  });
});
```

---

## ğŸ“š æœ€ä½³å®è·µ

### ğŸ¯ ç»„ä»¶è®¾è®¡æ¨¡å¼

#### å¤åˆç»„ä»¶æ¨¡å¼
```typescript
// å¤åˆç»„ä»¶ç¤ºä¾‹
const Card = ({ children, className, ...props }) => (
  <div className={cn('card', className)} {...props}>
    {children}
  </div>
);

const CardHeader = ({ children, className, ...props }) => (
  <div className={cn('card-header', className)} {...props}>
    {children}
  </div>
);

const CardBody = ({ children, className, ...props }) => (
  <div className={cn('card-body', className)} {...props}>
    {children}
  </div>
);

// ä½¿ç”¨æ–¹å¼
<Card>
  <CardHeader>æ ‡é¢˜</CardHeader>
  <CardBody>å†…å®¹</CardBody>
</Card>

// å¯¼å‡ºå¤åˆç»„ä»¶
Card.Header = CardHeader;
Card.Body = CardBody;

export default Card;
```

#### æ¸²æŸ“å±æ€§æ¨¡å¼
```typescript
// æ¸²æŸ“å±æ€§ç»„ä»¶
interface DataProviderProps<T> {
  url: string;
  children: (data: T | null, loading: boolean, error: string | null) => React.ReactNode;
}

function DataProvider<T>({ url, children }: DataProviderProps<T>) {
  const [data, setData] = useState<T | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    fetchData(url)
      .then(setData)
      .catch(setError)
      .finally(() => setLoading(false));
  }, [url]);

  return <>{children(data, loading, error)}</>;
}

// ä½¿ç”¨æ–¹å¼
<DataProvider url="/api/data">
  {(data, loading, error) => {
    if (loading) return <LoadingSpinner />;
    if (error) return <ErrorMessage error={error} />;
    return <DataTable data={data} />;
  }}
</DataProvider>
```

### ğŸ¯ ä»£ç ç»„ç»‡

#### ç›®å½•ç»“æ„
```
src/components/
â”œâ”€â”€ kpi/
â”‚   â”œâ”€â”€ KpiCard.tsx          # ä¸»ç»„ä»¶
â”‚   â”œâ”€â”€ KpiCard.test.tsx     # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ KpiCard.stories.tsx  # Storybook æ•…äº‹
â”‚   â”œâ”€â”€ KpiCard.types.ts     # ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ index.ts             # å¯¼å‡ºæ–‡ä»¶
â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ Button/
â”‚   â”œâ”€â”€ Input/
â”‚   â”œâ”€â”€ Modal/
â”‚   â””â”€â”€ index.ts             # ç»Ÿä¸€å¯¼å‡º
â””â”€â”€ charts/
    â”œâ”€â”€ ChartContainer/
    â”œâ”€â”€ LineChart/
    â””â”€â”€ index.ts
```

#### å¯¼å‡ºè§„èŒƒ
```typescript
// index.ts - ç»Ÿä¸€å¯¼å‡º
export { KpiCard } from './KpiCard';
export type { KpiCardProps } from './KpiCard.types';

// barrel å¯¼å‡º - é¿å…æ·±å±‚å¯¼å…¥
export * from './kpi';
export * from './ui';
export * from './charts';
```

---

**æ–‡æ¡£ç‰ˆæœ¬:** 2.0.0  
**æ›´æ–°æ—¶é—´:** 2025-12-23  
**ç»´æŠ¤å›¢é˜Ÿ:** å‰ç«¯å¼€å‘å›¢é˜Ÿ  
**ç›¸å…³æ–‡æ¡£**: [å…¨å±€è®¾è®¡è§„èŒƒ](./å…¨å±€è®¾è®¡è§„èŒƒ.md) | [è®¾è®¡å®ç°æŒ‡å—](./è®¾è®¡å®ç°æŒ‡å—.md)