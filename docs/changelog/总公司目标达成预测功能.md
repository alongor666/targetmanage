# æ€»å…¬å¸ç›®æ ‡è¾¾æˆé¢„æµ‹åŠŸèƒ½ - æ›´æ–°æ—¥å¿—

> **åˆ†ç±»**: åŠŸèƒ½å˜æ›´æ—¥å¿—
> **ç‰ˆæœ¬**: V1.0
> **æ—¥æœŸ**: 2025-12-23
> **å…³è”æ–‡æ¡£**: [æŒ‡æ ‡å®šä¹‰è§„èŒƒ - æ€»å…¬å¸ç›®æ ‡è¾¾æˆé¢„æµ‹](../business/æŒ‡æ ‡å®šä¹‰è§„èŒƒ.md#æ€»å…¬å¸ç›®æ ‡è¾¾æˆé¢„æµ‹v1)
> **å…³è”ä»£ç **: `src/domain/headquarters.ts`, `src/app/page.tsx`

## åŠŸèƒ½æ¦‚è¿°

åŸºäºä¸‰çº§æœºæ„çš„å®é™…è¾¾æˆæƒ…å†µï¼Œé¢„æµ‹å››å·åˆ†å…¬å¸æ•´ä½“å¯¹æ€»å…¬å¸ç›®æ ‡çš„å®Œæˆåº¦ã€‚è¯¥åŠŸèƒ½ä¸æŒ‰ä¸‰çº§æœºæ„æ‹†åˆ†ï¼Œä»…æŒ‰äº§å“åˆ†ç±»å±•ç¤ºé¢„æµ‹è¾¾æˆç‡ã€‚

## æ•°æ®é…ç½®

### æ€»å…¬å¸ç›®æ ‡è®¾å®šï¼ˆ2026å¹´ï¼‰

æ–‡ä»¶ä½ç½®ï¼š`public/data/headquarters_targets_annual_2026.json`

| äº§å“ | æ€»å…¬å¸ç›®æ ‡ | ä¸‰çº§æœºæ„ç›®æ ‡æ€»å’Œ | å·®å¼‚ | è¶…é¢æ¯”ä¾‹ |
|------|-----------|----------------|------|---------|
| è½¦é™© | 43,000ä¸‡å…ƒ | 45,470ä¸‡å…ƒ | +2,470 | +5.74% |
| è´¢äº§é™© | 10,850ä¸‡å…ƒ | 12,050ä¸‡å…ƒ | +1,200 | +11.06% |
| äººèº«é™© | 13,800ä¸‡å…ƒ | 15,590ä¸‡å…ƒ | +1,790 | +12.97% |
| **åˆè®¡** | **67,650ä¸‡å…ƒ** | **73,110ä¸‡å…ƒ** | **+5,460** | **+8.07%** |

**å…³é”®æ´å¯Ÿï¼š**
- ä¸‰çº§æœºæ„ç›®æ ‡æ€»å’Œæ¯”æ€»å…¬å¸ç›®æ ‡é«˜8.07%
- è¿™æ„å‘³ç€å¦‚æœæ‰€æœ‰ä¸‰çº§æœºæ„éƒ½è¾¾æˆå„è‡ªç›®æ ‡ï¼Œå°†è¶…é¢å®Œæˆæ€»å…¬å¸ç›®æ ‡
- æä¾›äº†çº¦8%çš„å®‰å…¨è¾¹é™…

## æŠ€æœ¯å®ç°

### 1. æ•°æ®å±‚ (Schema & Types)
- `src/schemas/schema.ts`: æ·»åŠ  `HeadquartersTargetRecordSchema`
- `src/schemas/types.ts`: æ·»åŠ  `HeadquartersTargetRecord` ç±»å‹

### 2. æ•°æ®åŠ è½½ (Services)
- `src/services/loaders.ts`:
  - æ–°å¢ `HeadquartersTargetsFileSchema`
  - æ–°å¢ `loadHeadquartersTargetsAnnual2026()` å‡½æ•°

### 3. ä¸šåŠ¡é€»è¾‘ (Domain)
- `src/domain/headquarters.ts` (æ–°æ–‡ä»¶):
  - `calculateHqAchievementRate()`: è®¡ç®—è¾¾æˆç‡
  - `calculateHqGap()`: è®¡ç®—å·®è·
  - `aggregateHqTargetsByProduct()`: æŒ‰äº§å“èšåˆ
  - `predictMonthlyHqAchievement()`: æœˆåº¦é¢„æµ‹
  - `calculateQuarterHqAchievementRate()`: å­£åº¦è¾¾æˆç‡

### 4. UIç»„ä»¶ (App)
- `src/app/page.tsx`:
  - æ·»åŠ  `hqPrediction` useMemoè®¡ç®—é€»è¾‘
  - æ–°å¢è“è‰²èƒŒæ™¯é¢„æµ‹å±•ç¤ºåŒºå—
  - 4ä¸ªäº§å“å¡ç‰‡ï¼ˆè½¦é™©ã€è´¢äº§é™©ã€äººèº«é™©ã€æ±‡æ€»ï¼‰
  - æœˆåº¦ç´¯è®¡è¾¾æˆé¢„æµ‹å›¾è¡¨ï¼ˆEChartsåŒYè½´ï¼‰

## UIå±•ç¤º

### é¢„æµ‹å¡ç‰‡
æ¯ä¸ªäº§å“æ˜¾ç¤ºï¼š
- æ€»å…¬å¸ç›®æ ‡é‡‘é¢
- YTDå®é™…å®Œæˆé‡‘é¢
- å½“å‰è¾¾æˆç‡ï¼ˆå¸¦é¢œè‰²æ ‡è¯†ï¼‰

é¢œè‰²è§„åˆ™ï¼š
- ğŸŸ¢ ç»¿è‰²ï¼šè¾¾æˆç‡ â‰¥ 100%ï¼ˆè¶…é¢å®Œæˆï¼‰
- ğŸ”´ çº¢è‰²ï¼šè¾¾æˆç‡ < 80%ï¼ˆä¸¥é‡æœªè¾¾æ ‡ï¼‰
- ğŸ”µ è“è‰²ï¼š80% â‰¤ è¾¾æˆç‡ < 100%ï¼ˆéœ€åŠ å¼ºï¼‰

### é¢„æµ‹å›¾è¡¨
- Xè½´ï¼š1-12æœˆ
- å·¦Yè½´ï¼šä¿è´¹é‡‘é¢ï¼ˆä¸‡å…ƒï¼‰
  - æŸ±çŠ¶å›¾ï¼šç´¯è®¡å®é™…
  - æŠ˜çº¿å›¾ï¼šç´¯è®¡ç›®æ ‡
- å³Yè½´ï¼šè¾¾æˆç‡ï¼ˆ%ï¼‰
  - æŠ˜çº¿å›¾ï¼šæœˆåº¦è¾¾æˆç‡è¶‹åŠ¿

## ä¸šåŠ¡æ–‡æ¡£

æ›´æ–°æ–‡ä»¶ï¼š`docs/business/æŒ‡æ ‡å®šä¹‰è§„èŒƒ.md`

æ–°å¢ç« èŠ‚ï¼š**æ€»å…¬å¸ç›®æ ‡è¾¾æˆé¢„æµ‹ï¼ˆV1ï¼‰**
- æ ¸å¿ƒæ¦‚å¿µè¯´æ˜
- æ•°æ®æ¥æº
- é¢„æµ‹æŒ‡æ ‡å®šä¹‰
- å·®è·åˆ†ææ–¹æ³•
- UIå±•ç¤ºè§„èŒƒ
- ä½¿ç”¨åœºæ™¯è¯´æ˜

## ä½¿ç”¨åœºæ™¯

1. **ç›®æ ‡å·®å¼‚ç›‘æ§**
   - å®æ—¶ç›‘æ§ä¸‰çº§æœºæ„å®é™…è¾¾æˆæƒ…å†µä¸æ€»å…¬å¸ç›®æ ‡çš„å…³ç³»
   - å½“å‰æœ‰8.07%çš„å®‰å…¨è¾¹é™…

2. **æå‰é¢„è­¦**
   - åŸºäºå½“å‰è¿›åº¦é¢„æµ‹å¹´åº•æ˜¯å¦èƒ½è¾¾æˆæ€»å…¬å¸ç›®æ ‡
   - åŠæ—¶å‘ç°åå·®å¹¶é‡‡å–æªæ–½

3. **äº§å“ç»“æ„è°ƒæ•´**
   - è¯†åˆ«å“ªäº›äº§å“éœ€è¦åŠ å¼ºæ¨åŠ¨
   - ä¼˜åŒ–èµ„æºé…ç½®

4. **å®‰å…¨è¾¹é™…åˆ†æ**
   - è¯„ä¼°ä¸‰çº§æœºæ„ç›®æ ‡è®¾å®šæ˜¯å¦åˆç†
   - å®¹é”™ç©ºé—´åˆ†æ

## å¦‚ä½•ä½¿ç”¨

### æŸ¥çœ‹é¢„æµ‹
1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š`pnpm dev`
2. è®¿é—®ä¸»é¡µï¼šhttp://localhost:3000
3. åœ¨é¡µé¢ä¸‹æ–¹æ‰¾åˆ°è“è‰²èƒŒæ™¯çš„"æ€»å…¬å¸ç›®æ ‡è¾¾æˆé¢„æµ‹"åŒºå—
4. æŸ¥çœ‹å„äº§å“çš„è¾¾æˆæƒ…å†µ
5. åˆ‡æ¢äº§å“ä¸‹æ‹‰æ¡†ï¼ŒæŸ¥çœ‹ä¸åŒäº§å“çš„æœˆåº¦é¢„æµ‹è¶‹åŠ¿

### ä¿®æ”¹æ€»å…¬å¸ç›®æ ‡
ç¼–è¾‘æ–‡ä»¶ï¼š`public/data/headquarters_targets_annual_2026.json`

```json
{
  "year": 2026,
  "unit": "ä¸‡å…ƒ",
  "type": "headquarters_targets_annual",
  "records": [
    {
      "year": 2026,
      "product": "auto",
      "annual_target": 43000,
      "unit": "ä¸‡å…ƒ"
    }
    // ... å…¶ä»–äº§å“
  ]
}
```

ä¿®æ”¹ååˆ·æ–°é¡µé¢å³å¯ç”Ÿæ•ˆã€‚

## æ•°æ®æµç¨‹

```
ä¸‰çº§æœºæ„æœˆåº¦å®é™…æ•°æ®
    â†“
aggregateMonthlyActuals() - èšåˆåˆ°å…¨çœç»´åº¦ï¼ˆallè§†è§’ï¼‰
    â†“
loadHeadquartersTargetsAnnual2026() - åŠ è½½æ€»å…¬å¸ç›®æ ‡
    â†“
aggregateHqTargetsByProduct() - æŒ‰äº§å“åˆ†ç»„
    â†“
calculateHqAchievementRate() - è®¡ç®—è¾¾æˆç‡
    â†“
UIå±•ç¤ºï¼ˆå¡ç‰‡ + å›¾è¡¨ï¼‰
```

## éªŒè¯

- âœ… TypeScriptç±»å‹æ£€æŸ¥é€šè¿‡
- âœ… ç”Ÿäº§æ„å»ºæˆåŠŸ
- âœ… æ‰€æœ‰é¡µé¢æ­£å¸¸ç”Ÿæˆ
- âœ… æ•°æ®åŠ è½½æ­£å¸¸
- âœ… è®¡ç®—é€»è¾‘æ­£ç¡®
- âœ… UIæ¸²æŸ“æ­£å¸¸

## ç‰ˆæœ¬ä¿¡æ¯

- **åˆ›å»ºæ—¥æœŸ**: 2025-12-23
- **ç‰ˆæœ¬**: V1.0
- **ä½œè€…**: Claude Code
- **ç›¸å…³PR**: (å¾…å¡«å†™)

## æœªæ¥ä¼˜åŒ–æ–¹å‘

1. æ”¯æŒæŒ‰æ—¶é—´è¿›åº¦å£å¾„ï¼ˆçº¿æ€§/æƒé‡/2025å®é™…ï¼‰è®¡ç®—æ€»å…¬å¸ç›®æ ‡è¾¾æˆç‡
2. æ·»åŠ å­£åº¦ç»´åº¦çš„é¢„æµ‹å±•ç¤º
3. æ”¯æŒå†å²è¶‹åŠ¿å¯¹æ¯”
4. æ·»åŠ å¯¼å‡ºé¢„æµ‹æŠ¥å‘ŠåŠŸèƒ½
5. æ”¯æŒè‡ªå®šä¹‰é¢„è­¦é˜ˆå€¼
